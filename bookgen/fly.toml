app = "bookgen-worker"
primary_region = "ams"

[build]
  dockerfile = "Dockerfile"

[env]
  NODE_ENV = "production"
  BOOKGEN_IDLE_SLEEP_MS = "5000"
  BOOKGEN_LOG_EVERY = "1"
  BOOKGEN_LLM_TIMEOUT_MS = "300000"
  BOOKGEN_MAX_YIELDS = "1500"

# No HTTP service -- this is a worker process, not a web server
[[vm]]
  size = "shared-cpu-2x"
  memory = "2gb"
  auto_stop_machines = "off"
  auto_start_machines = true
  min_machines_running = 1

