/* AUTO-GENERATED from design tokens.
 * tokens: /Users/asafgafni/Desktop/InDesign/TestRun/new_pipeline/extract/design_tokens.json
 * doc:  
 * exportedAt: 20260104_235052
 */

/**
 * Prince CSS: A&F-inspired two-column textbook layout (not pixel-perfect).
 *
 * Goals:
 * - Two-column body like the InDesign book
 * - Headings and figures can span both columns
 * - Figure captions render as: **Afbeelding X.Y:** caption body
 * - Stable, deterministic print output (Prince XML)
 *
 * Notes:
 * - Aim for InDesign parity; avoid decorative flourishes that aren't in the source.
 */

/* =========================
   Font Embedding (open fonts)
   ========================= */
@font-face {
  font-family: "Source Sans 3";
  src: local("Source Sans 3"), local("SourceSans3-Regular"), local("Source Sans Pro");
  font-weight: 400;
  font-style: normal;
}
@font-face {
  font-family: "Source Sans 3";
  src: local("Source Sans 3 Bold"), local("SourceSans3-Bold"), local("Source Sans Pro Bold");
  font-weight: 700;
  font-style: normal;
}
@font-face {
  font-family: "Source Sans 3";
  src: local("Source Sans 3 Italic"), local("SourceSans3-Italic"), local("Source Sans Pro Italic");
  font-weight: 400;
  font-style: italic;
}
@font-face {
  font-family: "Source Serif 4";
  src: local("Source Serif 4"), local("SourceSerif4-Regular"), local("Source Serif Pro");
  font-weight: 400;
  font-style: normal;
}

:root {
  --page-width: 195mm;
  --page-height: 265mm;
  --margin-top: 20mm;
  --margin-bottom: 20mm;
  --margin-inner: 15mm;
  --margin-outer: 15mm;
  --font-body: "FreightSans Pro", "Source Sans 3", "Helvetica Neue", Arial, sans-serif;
  --font-sans: "Facit", "Source Sans 3", "Helvetica Neue", Arial, sans-serif;
  --text: #111;
  --muted: #555;
  --rule: #c9c9c9;
  --accent: cmyk(77%, 7%, 56%, 0%);
  --body-size: 12pt;
  --body-leading: 1.25;
  --h1: 35pt;
  --h2: 18pt;
  --h3: 14pt;
  --p-space-after: 2mm;
  --p-space-after-extra: 0.8mm;
  --block-gap: calc(var(--p-space-after) + var(--p-space-after-extra));
  --h2-space-before: 4mm;
  --h2-space-after: 2mm;
  --h3-space-before: 2mm;
  --h3-space-after: 1mm;
  --h3-space-before-scale: 1.25;
  --steps-space-after-token: 2mm;
  --steps-space-after: calc(var(--steps-space-after-token) + var(--p-space-after-extra));
  --praktijk-bg: cmyk(10%, 0%, 10%, 0%);
  --praktijk-border: cmyk(22%, 0%, 22%, 0%);
  --praktijk-accent: var(--accent);
  --verdieping-bg: cmyk(0%, 10%, 14%, 0%);
  --verdieping-border: cmyk(0%, 22%, 28%, 0%);
  --verdieping-accent: cmyk(0%, 60%, 70%, 25%);
  --bullet-marker-gap: 1.2mm;
  --box-inline-icon-size: 4.2mm;
  --box-inline-icon-gap: 1.2mm;
  --box-pad-top: 2.5mm;
  --box-pad-x: 5mm;
  --box-pad-bottom: 3mm;
  --box-label-gap: 0.8mm;
  --orphans: 2;
  --widows: 2;
  --bullet-lvl1-left-indent: 7mm;
  --bullet-lvl1-hang: 7mm;
  --bullet-lvl2-left-indent: 11.6mm;
  --bullet-lvl2-hang: 5.3mm;
  --bullet-lvl3-left-indent: 17mm;
  --bullet-lvl3-hang: 5.3mm;
  --steps-left-indent: 7mm;
  --steps-hang: 6.4mm;
  --body-columns: 2;
  --col-gap: 9mm;
  --column-width: 78mm;
}

/* =========================
   Page setup
   ========================= */

@page {
  size: var(--page-width) var(--page-height);
  margin: var(--margin-top) var(--margin-outer) var(--margin-bottom) var(--margin-inner);

  @bottom-center {
    content: counter(page);
    font-family: var(--font-sans);
    font-size: 9pt;
    color: var(--muted);
  }
}

@page :left {
  margin-left: var(--margin-outer);
  margin-right: var(--margin-inner);

  /* Running headers disabled (too noisy / duplicative). */
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }

  @bottom-left {
    content: counter(page);
    font-family: var(--font-sans);
    font-size: 9pt;
    color: var(--muted);
  }
  @bottom-center { content: none; }
  @bottom-right { content: none; }
}

@page :right {
  margin-left: var(--margin-inner);
  margin-right: var(--margin-outer);

  /* Running headers disabled (too noisy / duplicative). */
  @top-right { content: none; }
  @top-left { content: none; }
  @top-center { content: none; }

  @bottom-right {
    content: counter(page);
    font-family: var(--font-sans);
    font-size: 9pt;
    color: var(--muted);
  }
  @bottom-center { content: none; }
  @bottom-left { content: none; }
}

@page chapter-first {
  /* Chapter opener should be full-bleed (no white margins around the opener art). */
  margin: 0;

  /* Remove running headers/folios on the opener page */
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }
  @bottom-center { content: none; }
  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page chapter-first:left {
  /* Ensure left-page opener doesn't inherit :left running header rules */
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }
  @bottom-center { content: none; }
  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page chapter-first:right {
  /* Ensure right-page opener doesn't inherit :right running header rules */
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }
  @bottom-center { content: none; }
  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

/* =========================
   Frontmatter / Backmatter
   (Prince-first, repo-local)
   ========================= */

/* Colofon metadata lines should never be justified (prevents huge word gaps). */
.fm-meta-line {
  text-align: left;
  white-space: nowrap;
}

/* Colofon/legal matter is typically set ragged-right; avoid ugly justification on these narrow lines. */
#fm-colofon .matter-body .p {
  text-align: left;
}

/* A named page master for non-chapter matter: no running headers, keep folios. */
@page matter:left {
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }

  @bottom-left {
    content: counter(page);
    font-family: var(--font-sans);
    font-size: 9pt;
    color: var(--muted);
  }
  @bottom-center { content: none; }
  @bottom-right { content: none; }
}

@page matter:right {
  @top-left { content: none; }
  @top-right { content: none; }
  @top-center { content: none; }

  @bottom-right {
    content: counter(page);
    font-family: var(--font-sans);
    font-size: 9pt;
    color: var(--muted);
  }
  @bottom-center { content: none; }
  @bottom-left { content: none; }
}

.matter,
.toc,
.title-page {
  page: matter;
}

.matter-section {
  break-before: page;
}
.matter-section:first-child {
  break-before: auto;
}

h1.matter-title {
  /* Keep it consistent with the book's accent style, but smaller than chapter titles. */
  font-size: var(--h2);
  margin: 0 0 6mm 0;
  padding-bottom: 2mm;
  border-bottom: 2pt solid var(--accent);
  /* Ensure bookmarks exist for matter pages (but keep the chapter list intact). */
  prince-bookmark-level: 1;
  prince-bookmark-label: attr(data-bookmark);
}

/* =========================
   Base typography
   ========================= */

html {
  font-family: var(--font-body);
  font-size: var(--body-size);
  line-height: var(--body-leading);
  color: var(--text);
  text-align: left;

  /* Enhanced hyphenation */
  hyphens: none;
  prince-hyphens: none;
}

body {
  margin: 0;
}

/* Base paragraph block (main story paragraphs only; box paragraphs are styled separately). */
.p {
  margin: 0;
  orphans: var(--orphans);
  widows: var(--widows);
  /* Changed to left-aligned (no justify) */
  text-align: left;
}

/* ==========================================================
   Optional: Ragged-right (align-left) mode for narrow columns
   Enable via renderer flag: `--align left` (adds `body.ragged-right`)
   ========================================================== */
body.ragged-right {
  /* Ragged-right is standard CSS. Advanced page/spread fill tuning is optional and gated below. */
}

/* Prince for Books extension hints (safe: will be ignored if unsupported). */
@supports (-prince-page-fill: prefer-balance) {
  body.ragged-right { -prince-page-fill: prefer-balance; }
}
@supports (prince-page-fill: prefer-balance) {
  body.ragged-right { prince-page-fill: prefer-balance; }
}

body.ragged-right .p,
body.ragged-right ul.bullets li,
body.ragged-right ol.steps li,
body.ragged-right .box p {
  text-align: left;
  text-align-last: left;
  text-justify: auto;
}

.p.role-body {
  margin-bottom: var(--block-gap);
}

/* Prince-only design rule: demoted bullets render as paragraph text (no bullet glyph). */
.p.list-demoted {
  /* When we remove bullets, align text to the normal body margin (no leftover bullet indent). */
  padding-left: 0;
  text-indent: 0;
}
.p.list-demoted.list-lines {
  /* keep line-broken continuation lists readable */
  padding-left: 0;
  /* Demoted lists should still read like lists: tighter spacing than normal paragraphs. */
  margin-bottom: 0.9mm;
}

/* InDesign body style uses SpaceAfter; prefer spacing over indentation */
.p + .p { text-indent: 0; }

/* Reset after headings/figures/blocks */
h1 + p,
h2 + p,
h3 + p,
figure + p,
.box + p {
  text-indent: 0;
}

/* =========================
   Headings
   ========================= */

h1, h2, h3 {
  font-family: var(--font-sans);
  color: var(--accent);
  font-weight: 700;
  line-height: 1.15;
  break-after: avoid;
  page-break-after: avoid;
  break-inside: avoid;
  /* Headings should never hyphenate (looks unprofessional and causes ugly breaks like "naslagw- erken"). */
  hyphens: none;
  prince-hyphens: none;
}

/* =========================
   PDF Bookmarks (Prince)
   ========================= */
h1.chapter-title {
  prince-bookmark-level: 1;
  prince-bookmark-label: attr(data-bookmark);
}
h2.section-title {
  prince-bookmark-level: 2;
  prince-bookmark-label: attr(data-bookmark);
}
h3.subparagraph-title {
  prince-bookmark-level: 3;
  prince-bookmark-label: attr(data-bookmark);
}

.chapter {
  /* Running headers: set defaults at chapter start so the first text page (often left/verso)
     still has a sensible header even before the first section title is encountered. */
  string-set: chapter-title attr(data-chapter-title) section-title attr(data-chapter-title);
}

.chapter-title-block {
  /* Start each chapter on a new page (but do NOT force recto/verso blank pages). */
  break-before: page;

  /* Default chapter header (no opener art): normal flow, no absolute overlay. */
  position: relative;
  margin: 0 0 6mm 0;
  padding: 0;
}

.chapter-opener-page {
  /* Dedicated opener page: full-bleed @page chapter-first + no running headers. */
  page: chapter-first;
  break-before: page;
  /* NOTE: page break after is handled by the opener figure itself (break-after: page). */
  position: relative;
  margin: 0;
  width: var(--page-width);
  height: var(--page-height);
  overflow: hidden;
}

/* NOTE: Chapter opener pages are image-only. Do not overlay chapter title text on top of opener art. */

.chapter-number {
  font-family: var(--font-sans);
  font-size: 9pt;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 2mm;
}

h1.chapter-title {
  font-size: var(--h1);
  margin: 0;
  padding-bottom: 2mm;
  border-bottom: 2pt solid var(--accent);
}

h2.section-title {
  font-size: var(--h2);
  margin: var(--h2-space-before) 0 var(--h2-space-after) 0;
  string-set: section-title content();
}

h2.section-title .section-number {
  display: inline-block;
  white-space: nowrap;
  margin-right: 0.35em;
}

/* Micro titles inside sections (small, thin, green; not a numbered heading) */
p.micro-title {
  font-family: var(--font-sans);
  font-size: 12pt;
  font-weight: 700;
  color: var(--accent);
  text-align: left;
  margin: 4mm 0 0.5mm 0;
  /* Never leave a micro-title stranded at the end of a page/column. */
  break-after: avoid;
  page-break-after: avoid;
  break-inside: avoid;
  page-break-inside: avoid;
  hyphens: none;
  prince-hyphens: none;
}

/* Keep headings with enough following text (avoid "orphan headings").
   Target: at least ~3 lines of the following paragraph on the same page/column.
   Prince enforces this via `orphans` on the paragraph + `break-after: avoid` on the heading. */
h2.section-title + p.p,
h3.subparagraph-title + p.p,
p.micro-title + p.p {
  orphans: 3;
  widows: 3;
}

h3.subparagraph-title {
  font-size: var(--h3);
  margin: calc(var(--h3-space-before) * var(--h3-space-before-scale)) 0 var(--h3-space-after) 0;
  /* Keep subparagraph headings column-contained to avoid constant column resets. */
}

/* =========================
   KD appendix (teacher-only; optional)
   ========================= */
.kd-appendix {
  page-break-before: always;
}
.kd-appendix .kd-note {
  font-size: 10pt;
  color: var(--muted);
  margin: 2mm 0 6mm 0;
}
.kd-appendix .kd-kerntaak {
  font-family: var(--font-sans);
  color: var(--accent);
  font-weight: 700;
  margin: 8mm 0 3mm 0;
}
.kd-appendix .kd-wp {
  margin: 2mm 0 3mm 0;
}
.kd-appendix .kd-wp-title {
  font-family: var(--font-sans);
  font-weight: 700;
  color: var(--text);
  margin: 0 0 1mm 0;
}
.kd-appendix .kd-refs {
  font-size: 10pt;
  color: var(--muted);
  margin: 0 0 2mm 0;
}
.kd-appendix .kd-refs a {
  color: inherit;
  text-decoration: none;
}
.kd-appendix .kd-refs a:hover {
  text-decoration: underline;
}

/* Chapter-top KD view */
.kd-appendix .kd-chapter {
  margin: 6mm 0 8mm 0;
}
.kd-appendix .kd-chapter-title {
  font-family: var(--font-sans);
  font-weight: 800;
  color: var(--text);
  margin: 0 0 2mm 0;
}
.kd-appendix .kd-chapter-note {
  font-size: 10pt;
  color: var(--muted);
  margin: 0 0 3mm 0;
}
.kd-appendix .kd-wp-expl {
  font-size: 10pt;
  color: var(--muted);
  margin: 0 0 1mm 0;
}
.kd-appendix .kd-wp-why {
  font-size: 10pt;
  color: var(--muted);
  margin: 0 0 1mm 0;
}
.kd-appendix .kd-wp-examples {
  font-size: 10pt;
  color: var(--muted);
  margin: 0 0 2mm 0;
}

/* =========================
   Two-column flow
   ========================= */

.chapter-body {
  column-count: var(--body-columns);
  column-gap: var(--col-gap);
  /* Column balancing:
     - `balance` may only balance the LAST fragment in paged media (implementation-dependent).
     - `balance-all` (when supported) balances EVERY page fragment, preventing pages where only the left
       column is used (a common artifact right before full-width figures).
     Keep the `balance` fallback first for engines that don't support `balance-all`. */
  column-fill: balance;
  column-fill: balance-all;
}

/* Keep boxes/figures from splitting awkwardly */
figure,
.box {
  break-inside: avoid;
  page-break-inside: avoid;
}

/* =========================
   Figures
   ========================= */

figure.figure-block {
  margin: 5mm 0 6mm 0;
  break-inside: avoid;
  page-break-inside: avoid;
  /* Prince paged-media:
     Treat figures as floats so they can be deferred within the page/column flow.
     This reduces “orphaned” top-of-page figure placements and half-empty columns. */
  float: bottom;
  /* Prince-specific: prefer bottom placement only (best-effort). */
  float-placement: bottom;
}

figure.figure-block.full-width {
  width: 100%;
  /* Reduce half-empty pages:
     Prefer placing full-width figures at the bottom of the current page/column when possible. */
  float: bottom;
  /* Prince paged-media: page floats can be deferred to avoid blocking the right column.
     Using float-reference: page keeps the float full-width across the column set. */
  float-reference: page;
  clear: both;
  /* Prince-specific: prefer bottom placement only (best-effort). */
  float-placement: bottom;
}

/* Chapter opener: full-page bleed art (no margins) */
figure.figure-block.full-width.chapter-opener {
  float: none;
  clear: none;
  margin: 0;
  width: var(--page-width);
  height: var(--page-height);
  break-after: page;
}

figure.figure-block.full-width.chapter-opener img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  max-height: none;
}

figure.figure-block img {
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
  /* Prevent extremely tall portrait figures from overflowing the page area.
     If an image would exceed the body height, Prince will scale it down proportionally. */
  max-height: calc(var(--page-height) - var(--margin-top) - var(--margin-bottom) - 28mm);
  object-fit: contain;
  margin: 0 auto;
}

figcaption.figure-caption,
figcaption {
  margin-top: 3mm;
  font-family: var(--font-sans);
  font-size: 9pt;
  color: var(--muted);
  text-align: left;
}

figure.figure-block.content-figure {
  /* Content figures should fit in single column */
  float: none;
  break-inside: avoid;
  margin: 4mm 0;
}

figure.figure-block.content-figure img {
  max-height: 120mm;
}

.figure-label {
  font-weight: 600;
  margin-right: 0.5em;
  line-height: 1.35;
}

.figure-label {
  font-weight: 700;
  color: var(--accent);
}

/* =========================
   Praktijk / Verdieping boxes (Option A labels)
   ========================= */

.box {
  margin: 5mm 0;
  /* Icon sits on its own top row; keep text aligned to the box left edge */
  padding: var(--box-pad-top) var(--box-pad-x) var(--box-pad-bottom) var(--box-pad-x);
  border: 0.5pt solid var(--rule);
  border-left: 3pt solid var(--accent);
  background: #f7f7f7; /* fallback */
  border-radius: 0;
  text-indent: 0 !important;
  /* Allow boxes to break across columns/pages for better flow */
  break-inside: auto;
  page-break-inside: auto;
  /* Maintain visual appearance on both sides of a break */
  -webkit-box-decoration-break: clone;
  box-decoration-break: clone;

  /* Keep boxes in normal flow (NOT floats). */
  float: none;
}

.box.praktijk {
  background: var(--praktijk-bg);
  border-color: var(--praktijk-border);
  border-left-color: var(--praktijk-accent);
}

.box.verdieping {
  background: var(--verdieping-bg);
  border-color: var(--verdieping-border);
  border-left-color: var(--verdieping-accent);
}

.box p {
  /* Reset UA margins; we control spacing explicitly. */
  margin: 0;
  /* Layer paragraphs must also be LEFT_JUSTIFIED */
  text-align: left;
  font-style: italic;
  /* Allow boxes to split when needed (prevents huge mid-column whitespace). */
  orphans: 3;
  widows: 3;
}

/* Prevent the *first line* of a Praktijk/Verdieping paragraph from being justified with huge gaps. */
/* (Note: text-align on ::first-line is not consistently supported in Prince; use .box-lead instead.) */

/* Keep the first two words of the box text together and prevent justification from stretching the gap */
.box .box-lead {
  display: inline-block;
  white-space: nowrap;
  /* Prevent the lead span itself from justifying internally (can create huge gaps like "Bij    een"). */
  text-align: left;
}

.box p:last-child {
  margin-bottom: 0;
}

.box .box-label {
  font-family: var(--font-sans);
  font-size: inherit; /* InDesign marker: bold only, same size as body */
  font-weight: 700;
  color: var(--accent);
  /* Prevent the label from being orphaned at the end of a column/page */
  /* Make it a block element so break-after applies */
  display: block;
  break-after: avoid;
  page-break-after: avoid;
  margin-bottom: 2pt;
  /* Put label (with icon) on its own line at the top-left of the box */
  display: block;
  float: none;
  margin: 0 0 var(--box-label-gap) 0;
  text-align: left;
  white-space: nowrap;
  font-style: normal; /* keep label non-italic even though box body text is italic */
}

.box .box-label::before {
  content: "";
  display: inline-block;
  width: var(--box-inline-icon-size);
  height: var(--box-inline-icon-size);
  margin-right: var(--box-inline-icon-gap);
  vertical-align: text-top; /* align icon to the top of the label line */
  background-repeat: no-repeat;
  background-position: left center;
  background-size: contain;
}

.box.praktijk .box-label::before {
  background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2024%2024'%3E%0A%20%20%3Cg%20fill%3D'none'%20stroke%3D'%232D7A4E'%20stroke-width%3D'1.8'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%0A%20%20%20%20%3Cpath%20d%3D'M7%2010c0-2.8%202.2-5%205-5s5%202.2%205%205v7c0%202.8-2.2%205-5%205s-5-2.2-5-5v-7z'%2F%3E%0A%20%20%20%20%3Ccircle%20cx%3D'10'%20cy%3D'12'%20r%3D'1.7'%2F%3E%0A%20%20%20%20%3Ccircle%20cx%3D'14'%20cy%3D'12'%20r%3D'1.7'%2F%3E%0A%20%20%20%20%3Cpath%20d%3D'M12%2014l-1%201m1-1l1%201'%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E");
}

.box.verdieping .box-label::before {
  background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2024%2024'%3E%0A%20%20%3Cg%20fill%3D'none'%20stroke%3D'%238B4B3A'%20stroke-width%3D'1.8'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%0A%20%20%20%20%3Cpath%20d%3D'M9%2021h6'%2F%3E%0A%20%20%20%20%3Cpath%20d%3D'M10%2018h4'%2F%3E%0A%20%20%20%20%3Cpath%20d%3D'M6%2011a6%206%200%201%201%2012%200c0%202.2-1.2%203.6-2.4%204.8-.7.7-1.2%201.2-1.4%202.2H10c-.2-1-0.7-1.5-1.4-2.2C7.2%2014.6%206%2013.2%206%2011z'%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E");
}

.box.praktijk .box-label { color: var(--praktijk-accent); }
.box.verdieping .box-label { color: var(--verdieping-accent); }

/* If multiple boxes of the same type are consecutive, show the icon+label only on the first box. */
.box.praktijk + .box.praktijk .box-label,
.box.verdieping + .box.verdieping .box-label {
  display: none;
}

/* =========================
   Bullets (reconstructed from _Bullets styles)
   ========================= */

ul.bullets {
  /* InDesign _Bullets has SpaceAfter=0pt, but in Prince we enforce a readable gap
     between a list and the following paragraph so the list doesn't "stick" to the next line. */
  margin: 0;
  padding: 0;
  list-style: none;
  /* Allow lists to flow across columns/pages when needed.
     We keep `break-inside: avoid` on individual list items instead to prevent splitting an item mid-column. */
}

/* Ensure a consistent gap after lists before the next paragraph block */
ul.bullets + .p,
ol.steps + .p {
  margin-top: var(--block-gap);
}

ul.bullets li {
  margin: 0;
  padding-left: var(--bullet-lvl1-left-indent);
  text-indent: calc(0mm - var(--bullet-lvl1-hang));
  text-align: left;
  break-inside: avoid;
  page-break-inside: avoid;
}

ul.bullets li::before {
  /* Right-align marker within the hanging width so it doesn't stick out left. */
  content: "•";
  font-family: var(--font-sans);
  color: var(--accent);
  display: inline-block;
  width: var(--bullet-lvl1-hang);
  text-align: right;
  box-sizing: border-box;
  padding-right: var(--bullet-marker-gap); /* visual gap to text without shifting the indent */
}

ul.bullets.lvl2 li { padding-left: var(--bullet-lvl2-left-indent); text-indent: calc(0mm - var(--bullet-lvl2-hang)); }
ul.bullets.lvl2 li::before { width: var(--bullet-lvl2-hang); }
ul.bullets.lvl3 li { padding-left: var(--bullet-lvl3-left-indent); text-indent: calc(0mm - var(--bullet-lvl3-hang)); }
ul.bullets.lvl3 li::before { width: var(--bullet-lvl3-hang); }

/* =========================
   Numbered steps
   ========================= */

ol.steps {
  /* Keep steps tighter; rely on surrounding paragraphs for spacing. */
  margin: 0 0 var(--steps-space-after) 0;
  padding: 0;
  list-style: none;
  counter-reset: step;
  /* Allow step lists to flow across columns/pages when needed.
     We keep `break-inside: avoid` on individual step items instead to prevent splitting an item mid-column. */
}

ol.steps li {
  counter-increment: step;
  margin: 0;
  padding-left: var(--steps-left-indent);
  text-indent: calc(0mm - var(--steps-hang));
  text-align: left;
  break-inside: avoid;
  page-break-inside: avoid;
}

ol.steps li::before {
  /* Right-align numbers within the hanging width; keep a space to separate from text. */
  content: counter(step);
  font-family: var(--font-sans);
  color: var(--accent);
  font-weight: 700;
  display: inline-block;
  width: var(--steps-hang);
  text-align: right;
  box-sizing: border-box;
  padding-right: var(--bullet-marker-gap);
}

/* =========================
   TOC page numbers (Prince)
   ========================= */

.toc {
  page-break-after: always;
}

.toc h1 {
  font-family: var(--font-sans);
  color: var(--accent);
}

.toc-entry a {
  text-decoration: none;
  color: inherit;
  display: block;
}

.toc-num {
  display: inline-block;
  white-space: nowrap;
}

.toc-entry a::after {
  content: leader('.') " " target-counter(attr(href), page);
  float: right;
  font-family: var(--font-sans);
  font-size: 9pt;
  color: var(--muted);
}

/* =========================
   Reconstructed Figures (Overlay Labels)
   ========================= */
.reconstructed-figure .figure-label {
    font-family: var(--font-sans);
    font-size: 9pt; 
    line-height: 1.1;
    color: #000;
    pointer-events: none;
    white-space: normal;
    text-align: left;
    z-index: 10;
}

/* White labels */
.reconstructed-figure .figure-label[class*="white"],
.reconstructed-figure .figure-label.style-12pt-white-freightsans-pro {
    color: #fff;
    font-weight: bold; /* Often white labels are bold */
    text-shadow: 0 1px 2px rgba(0,0,0,0.8); /* Ensure readability against image */
}

/* Right aligned labels */
.reconstructed-figure .figure-label[class*="right-align"] {
    text-align: right;
}
